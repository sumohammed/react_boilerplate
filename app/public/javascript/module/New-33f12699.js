import{b as e,a as t,R as a}from"./index-80ae32d7.js";import{L as n,n as r}from"./index-b337307e.js";import"./defineProperty-a0480c32.js";import{_ as o}from"./slicedToArray-e1941acd.js";import"./toConsumableArray-0ed5356c.js";import{checkBalance as m}from"./common-27892a1c.js";import{a as c}from"./api-17772ac6.js";import{t as l}from"./actionTypes-edbc1405.js";import{u as i}from"./index-f0f0d0e2.js";import"./extends-cc4fca12.js";import{_ as u}from"./objectWithoutProperties-234758e1.js";import{P as s}from"./Pager-96b949a7.js";import{D as f}from"./Dialog-550d8283.js";import{L as p,N as d,T as E}from"./index-307e5487.js";import{E as b}from"./Icons-5efe7a19.js";import{A as j}from"./Animate-9feb1866.js";import{f as v,a as y,A as h,h as g}from"./index-0d44c75a.js";var x=i(function(e){return{session:e.session,balance:e.balance}})(function(i){var x=i.option,q=i.balance,A=i.dispatch,N=u(i,["option","balance","dispatch"]),C=e(!1),k=o(C,2),P=k[0],S=k[1],B=v(q.balance,"request"===x?"credit":"debit"),T=o(B,2),D=T[0],L=T[1],_=e({}),G=o(_,2),H=G[0],I=G[1],M=function(e,t,a){return S(!1),r("/pay?tab=pay&amount=".concat(e,"&name=").concat(t,"&via=").concat(a,"#/new/payee"))};return t(function(){y(c.getBalance).then(function(e){return A({type:l.SET_BALANCE,payload:e})})},[]),a.createElement(a.Fragment,null,a.createElement(s,null,a.createElement("div",{className:"header"},a.createElement(n,{to:"/pay"},a.createElement(b,null)),a.createElement("h6",null,"Â¢",D+" "," ",a.createElement("span",null,"bal"))),a.createElement("div",null,a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.amount.value,a=e.target.name.value;if(!Number(t))return h("Enter amount!");if("request"===x){var n=document.querySelector("input[name=amount]").value;if(!Number(n))return h("Enter amount!");var o="GHS".concat(n," - ").concat(e.target.note.value),c="https://hitriva.me/".concat(N.session.username);return g("Request Payment",o,c,function(){return r("/pay")})}return m(t,q.balance)?(I({amount:t,name:a}),S(!0)):h("Insufficient Balance")}},a.createElement(p,{id:"amount"},d({name:"amount",onChange:function(e){return L(e.target.value)},defaultValue:"0.00"}),"GHS"),"send"===x?a.createElement(p,null,E({name:"name",placeholder:"Name",required:!0})):a.createElement(p,null,E({name:"note",placeholder:"Optional note",required:!0})),a.createElement("button",null,"".concat("request"===x?x:"Next"))))),P?a.createElement(f,{onClick:S},a.createElement(j,{onClick:function(){return M(H.amount,H.name,"momo")}},a.createElement("li",null,"Mobile Money")),a.createElement(j,{onClick:function(){return M(H.amount,H.name,"bank")}},a.createElement("li",null,"Bank"))):"")});export default x;
