import{R as e}from"./index-80ae32d7.js";import{L as t,n as a}from"./index-b337307e.js";import"./defineProperty-a0480c32.js";import"./slicedToArray-e1941acd.js";import"./toConsumableArray-0ed5356c.js";import"./common-27892a1c.js";import{a as n}from"./api-17772ac6.js";import{t as r}from"./actionTypes-edbc1405.js";import{u as o}from"./index-f0f0d0e2.js";import"./extends-cc4fca12.js";import"./objectWithoutProperties-234758e1.js";import{P as m}from"./Pager-96b949a7.js";import{H as l,L as c,E as s,N as u,T as i,A as p}from"./index-307e5487.js";import{E as d}from"./Icons-5efe7a19.js";import{a as f}from"./index-0d44c75a.js";import{m as E,b as y}from"./DataSets-5c0a33f1.js";var T=o(function(e){return{session:e.session,balance:e.balance}})(function(o){var T=o.name,j=o.amount,b=o.via,S=o.dispatch,h=function(e){return document.querySelector("input[name=password]")&&e.append("password",document.querySelector("input[name=password]").value),S({type:r.SET_AUTHORIZE,payload:{status:!1}}),f(n.sendMoney,e).then(function(t){if("bank"===e.get("method")&&t){if(t.resp.reference_id)return S({type:r.SET_REFERENCE_AND_TRANSACTION,payload:{reference:t,transaction:{redirect:"/pay"}}}),a("/authorize/bank/".concat(t.resp.reference_id))}else if(t&&"completed"===t.status)return S({type:r.SET_TRANSACTION,payload:{status:!0,amount:e.get("amount"),contact:e.get("contact"),note:"Transfer Complete",redirect:"/pay"}});S({type:r.SET_BUTTON,payload:!1})})},A=function(t){return t.map(function(t,a){var n=t.code,r=t.name;return e.createElement("option",{key:a,value:n},r)})};return e.createElement(m,null,e.createElement("div",{className:"header"},e.createElement(t,{to:"/pay?tab=pay&option=send#/new"},e.createElement(d,null)),e.createElement("h5",null,T)),e.createElement("div",null,e.createElement("form",{id:"pay",onSubmit:function(e){e.preventDefault();var t=document.querySelector("#pay"),a=new FormData(t);return S({type:r.SET_AUTHORIZE_AND_TRANSACTION,payload:{transaction:{proceed:function(){return h(a)}},authorize:{status:!0,proceed:function(){return h(a)}}}})}},l({name:"method",defaultValue:b}),l({name:"saveUser",defaultValue:!0}),l({name:"name",defaultValue:T}),l({name:"amount",defaultValue:j}),"bank"===b&&e.createElement(c,null,e.createElement("select",{name:"processorType"},A(y))),"momo"===b&&e.createElement(c,null,e.createElement("select",{name:"processorType"},A(E))),"email"===b&&e.createElement(c,null,s({placeholder:"Email"})),"sms"===b&&e.createElement(c,null,u({name:"tel",placeholder:"Tel number"})),"bank"===b||"momo"===b&&e.createElement(c,null,u({name:"contact",placeholder:"".concat(b)+" digit"})),e.createElement(c,null,i({name:"note",placeholder:"Optional note"})),e.createElement(c,null,e.createElement(p,null,"Send")))))});export default T;
