import{b as e,R as t}from"./index-80ae32d7.js";import{L as a}from"./index-b337307e.js";import"./defineProperty-a0480c32.js";import{_ as n}from"./slicedToArray-e1941acd.js";import"./toConsumableArray-0ed5356c.js";import{getFormData as r,updateUserStore as l,resizeImage as o}from"./common-27892a1c.js";import{a as m}from"./api-17772ac6.js";import{t as s}from"./actionTypes-edbc1405.js";import{u as i}from"./index-f0f0d0e2.js";import"./extends-cc4fca12.js";import"./objectWithoutProperties-234758e1.js";import{P as c}from"./Pager-96b949a7.js";import{F as u,H as d,L as p,T as f,A as y}from"./index-307e5487.js";import{B as E}from"./Icons-5efe7a19.js";import{a as b}from"./index-0d44c75a.js";var h=i(function(e){return{session:e.session}})(function(i){var h=i.session,j=i.dispatch,v=e(h.picture),g=n(v,2),T=g[0],I=g[1],S=e(""),x=n(S,2),N=x[0],V=x[1],P=e(h.picture),U=n(P,2),A=U[0],D=U[1],F=e(!1),L=n(F,2),O=L[0],R=L[1],_=function(e){var t=new FormData;t.append("category","profile"),t.append("file",N),j({type:s.SET_AUTHORIZE,payload:{status:!1}});var a=r(e);return l(a),b(m.updatePersonalInfo,e).then(function(e){j({type:s.SET_SESSION,payload:a}),j({type:s.SET_BUTTON,payload:!1})}).then(function(){return O&&b(m.uploadImage,t)})};return t.createElement(c,{classname:"personalInfo"},t.createElement("div",{className:"header"},t.createElement("div",{className:"back"},t.createElement(a,{to:"/profile"},t.createElement(E,null))),t.createElement("h5",null,"Personal Info")),t.createElement("div",{className:"file"},t.createElement("div",{id:"picture",style:{backgroundImage:O?"url(".concat(T,")"):"url(https://s3.eu-west-2.amazonaws.com/triva/profile/".concat(T||"outline.png",")")}}),u({onChange:function(e){!function(e){e.target.files[0]&&(R(!0),I(URL.createObjectURL(e.target.files[0])),o(e).then(function(e){V(e),D(e.name)}))}(e)}})),t.createElement("div",null,t.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(document.querySelector("form")),a=e.target.bday.value.split("-");return t.append("birthdayDay",a[2]),t.append("birthdayMonth",a[1]),t.append("birthdayYear",a[0]),j({type:s.SET_AUTHORIZE,payload:{status:!0,proceed:function(){return _(t)}}})}},d({name:"picture",defaultValue:A}),t.createElement(p,null,"First Name",f({name:"firstname",defaultValue:h.firstname||""})),t.createElement(p,null,"Last Name",f({name:"lastname",defaultValue:h.lastname||""})),t.createElement(p,null,"Gender",t.createElement("select",{name:"gender",defaultValue:h.gender||""},t.createElement("option",null,"Male"),t.createElement("option",null,"Female"))),t.createElement(p,null,"Country",f({name:"country",defaultValue:h.country})),t.createElement(p,null,"Tel",f({name:"tel",defaultValue:h.tel||""})),t.createElement(p,null,"Birthday",t.createElement("input",{type:"date",name:"bday",defaultValue:h.birthdayYear+"-"+h.birthdayMonth+"-"+h.birthdayDay||"",required:!0})),t.createElement(p,null,t.createElement(y,null,"Update Info")))))});export default h;
