System.register(["./defineProperty-a1089ec5.js","./slicedToArray-4acdf83a.js"],function(e){"use strict";var t,r;return{setters:[function(e){t=e._},function(e){r=e._}],execute:function(){class n{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((r,n)=>{const o=indexedDB.open(e,1);o.onerror=()=>n(o.error),o.onsuccess=()=>r(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(t)}})}_withIDBStore(e,t){return this._dbp.then(r=>new Promise((n,o)=>{const i=r.transaction(this.storeName,e);i.oncomplete=()=>n(),i.onabort=i.onerror=()=>o(i.error),t(i.objectStore(this.storeName))}))}}let o;function i(){return o||(o=new n),o}function a(e,t=i()){let r;return t._withIDBStore("readonly",t=>{r=t.get(e)}).then(()=>r.result)}function s(e,t,r=i()){return r._withIDBStore("readwrite",r=>{r.put(t,e)})}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}e("getFormData",function(e){var t={},n=!0,o=!1,i=void 0;try{for(var a,s=e.entries()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=r(a.value,2),u=c[0],l=c[1];t[u]=l}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return t}),e("checkBalance",function(e,t){return Number(e)<Number(t)}),e("resizeImage",function(e,t){return new Promise(function(t,r){var n=Math.random().toString(36).substr(2)+(new Date).getTime()+".jpeg",o=new FileReader;o.readAsDataURL(e.target.files[0]),o.onload=function(e){var r=new Image;r.src=e.target.result,r.onload=function(){var e=document.createElement("canvas"),o=600/r.width;e.width=600,e.height=r.height*o;var i=e.getContext("2d");i.drawImage(r,0,0,600,r.height*o),i.canvas.toBlob(function(e){var r=new File([e],n,{type:"image/jpeg",lastModified:Date.now()});t(r)},"image/jpeg",1)},o.onerror=function(e){return console.log(e)}}})}),e("createCanvas",function(e){for(var t,r=document.querySelectorAll(e),n=0;n<r.length;n++){var o=r[n].getContext("2d");t=r[n].dataset.name.slice(0,1)[0].toUpperCase();var i=60;window.devicePixelRatio&&(i*=window.devicePixelRatio),r[n].width=i,r[n].height=i,o.fillStyle="#eaecee",o.fillRect(0,0,i,i),o.font=Math.round(i/2.8)+"px Montserrat",o.textAlign="center",o.fillStyle="#34485d",o.fillText(t,i/2,i/1.5)}}),e("updateUserStore",function(e){a("user").then(function(r){return s("user",function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?c(n,!0).forEach(function(r){t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},e))})}),e("setUserStore",function(e){s("user",e).catch(function(e){console.log(e)})}),e("checkSession",function(){return a("user")}),e("saveCredentials",function(e,t){if(window.PasswordCredential){var r=new PasswordCredential({id:e,password:t});navigator.credentials.store(r)}}),e("autoSignin",function(){if(window.PasswordCredential)return navigator.credentials.get({password:!0}).then(function(e){if(e)switch(e.type){case"password":var t=new FormData;return t.append("email",e.id),t.append("password",e.password),t}else;}).then(function(e){return e?signIn(e)(dispatch):null})})}}});
