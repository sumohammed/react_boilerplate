System.register(["./index-b0513f57.js","./index-272f0464.js","./defineProperty-a1089ec5.js","./slicedToArray-4acdf83a.js","./toConsumableArray-62f8d598.js","./common-d400c37d.js","./api-79424633.js","./actionTypes-b0d14a88.js","./index-fbae8ffb.js","./extends-0c7a6a58.js","./objectWithoutProperties-6039c2e9.js","./Pager-f37bd16c.js","./Dialog-24c60389.js","./index-e4d520eb.js","./Icons-c6c555dc.js","./Animate-411c42ad.js","./index-21526502.js","./PagerRouter-33985d49.js","./Menu-52ea7ecf.js"],function(e){"use strict";var t,n,a,l,r,c,u,o,m,i,s,d,E,f,p,g,v,h,y,N,b,S,w,D,A,G,C,T,k,F,_,j,L,V,U,x,O,W,M,I;return{setters:[function(e){t=e.a,n=e.R,a=e.b},function(e){l=e.L,r=e.n},function(){},function(e){c=e._},function(e){u=e._},function(e){o=e.resizeImage,m=e.getFormData},function(e){i=e.a},function(e){s=e.t},function(e){d=e.u},function(){},function(e){E=e._},function(e){f=e.P},function(e){p=e.D},function(e){g=e.H,v=e.L,h=e.N,y=e.B,N=e.F,b=e.T,S=e.A},function(e){w=e.B,D=e.A,A=e.C,G=e.M,C=e.P,T=e.S,k=e.c,F=e.d},function(e){_=e.A},function(e){j=e.a,L=e.b,V=e._,U=e.g,x=e.e,O=e.f,W=e.A},function(e){M=e.default},function(e){I=e.M}],execute:function(){var R=d(function(e){return{summary:e.summary}})(function(e){var a=e.summary,r=e.dispatch;return t(function(){j(i.getSummary).then(function(e){return r({type:s.SET_SUMMARY,payload:e})})},[]),n.createElement(f,{classname:"summary"},n.createElement("div",{className:"header"},n.createElement(l,{to:"/goals",className:"exit"},"Close"),n.createElement("h5",null,"Goals ",n.createElement("br",null),"Summary")),n.createElement("div",null,n.createElement("div",{className:"divider"},n.createElement("div",null,n.createElement("h4",null,"¢",L(a.sum)||0),n.createElement("span",null,"Saved")),n.createElement("hr",{className:"middle"}),n.createElement("div",null,n.createElement("h4",null,a.total||0),n.createElement("span",null,"Goals"))),n.createElement("div",{className:"breakdown"},n.createElement("section",null,n.createElement("div",null,n.createElement("h4",null,a.completed||0),n.createElement("span",null,"Completed")),"/",n.createElement("div",null,n.createElement("h5",null,"¢",a.completed_sum||0))),n.createElement("section",null,n.createElement("div",null,n.createElement("h4",null,a.pending||0),n.createElement("span",null,"Pending")),"/",n.createElement("div",null,n.createElement("h5",null,"¢",a.pending_sum||0))))))}),q=function(){var e=a(0),u=c(e,2),o=u[0],m=u[1],i=a(0),s=c(i,2),d=s[0],E=s[1],N=a(0),b=c(N,2),S=b[0],G=b[1],C=a(!1),T=c(C,2),k=T[0],F=T[1],j=a("Day"),L=c(j,2),O=L[0],W=L[1],M=a(),I=c(M,2),R=I[0],q=I[1],B=x(),P=B.currentDate,z=B.getDateNMonth,H=function(){var e=V(U.mark(function e(){var t,n;return U.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=Number(Number(o/d).toFixed(0)),n=P,"Day"===O?n.setDate(n.getDate()+t):"Week"===O?n.setDate(n.getDate()+7*t):"Month"===O&&n.setMonth(n.getMonth()+t),G(t),q(n);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Y=function(e){W(e),setTimeout(function(){F(!1)},300)};return t(function(){H()},[o,d,O]),n.createElement(n.Fragment,null,n.createElement(f,{classname:"start",style:{overflow:k?"hidden":"auto"}},n.createElement("div",{className:"header"},n.createElement("div",{className:"back"},n.createElement(l,{to:"/goals"},n.createElement(w,null))),n.createElement("h5",null,"Target ",n.createElement("br",null),"& Duration")),n.createElement("div",null,n.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.target.value,n=e.target.amount.value,a=e.target.plan.value,l="/goals?target=".concat(t,"&amount=").concat(n,"&plan=").concat(a,"#/add/target/details");return setTimeout(function(){return r(l)},500)},className:"borderless"},n.createElement(g,{name:"plan",defaultValue:O}),n.createElement(v,null,n.createElement("h4",null,"Target Amount"),n.createElement("div",null,"¢",h({defaultValue:"0",onChange:function(e){return m(Number(e.target.value))},className:"target",name:"target",autoFocus:!0}))),n.createElement(v,{className:"save"},n.createElement("div",null,n.createElement("h4",null,"Amount to save"),n.createElement("div",null,"¢",h({defaultValue:"0",name:"amount",onChange:function(e){E(Number(e.target.value))},disabled:!!k}))),n.createElement("span",null,"/"),n.createElement("div",null,n.createElement("div",{className:"dropdown",onClick:function(){F(!0)}},n.createElement("div",null,O),n.createElement(D,null)),n.createElement("h4",null))),n.createElement(v,{className:"estimate"},!isNaN(R)&&n.createElement("div",{className:"appear"},n.createElement("h4",null,"From"),n.createElement("h5",null,z(P)),n.createElement("h4",null,"To"),n.createElement("h5",null,z(R))),n.createElement("div",{className:"period"},n.createElement("h3",null,isFinite(S)?S:0,n.createElement("span",null,"".concat(O,"s"))))),n.createElement(v,null,n.createElement(y,null,"Next"))))),k&&n.createElement(p,{onClick:F},n.createElement(_,{onClick:function(){return Y("Day")}},n.createElement("li",null,"Day"),"Day"==O&&n.createElement(A,null)),n.createElement(_,{onClick:function(){return Y("Week")}},n.createElement("li",null,"Week"),"Week"==O&&n.createElement(A,null)),n.createElement(_,{onClick:function(){return Y("Month")}},n.createElement("li",null,"Month"),"Month"==O&&n.createElement(A,null))))},B=d()(function(e){var t=e.target,d=e.amount,E=e.plan,p=e.dispatch,h=a(),S=c(h,2),D=S[0],A=S[1],T=a(""),k=c(T,2),F=k[0],_=k[1],L=a("default.jpeg"),V=c(L,2),U=V[0],x=V[1],O=a(!1),W=c(O,2),M=W[0],I=W[1],R=a([]),q=c(R,2),B=q[0],P=q[1],z=function(e){if(e.target.files[0])return I(!0),A(URL.createObjectURL(e.target.files[0])),o(e).then(function(e){_(e),x(e.name)})},H=function(){var e=new FormData(document.querySelector("#goal"));e.append("shared",B.length>0),e.append("users",JSON.stringify({user:B}));var t=new FormData;return t.append("category","goals"),t.append("file",F),j(i.addGoal,e).then(function(t){p({type:s.SET_GOAL,payload:m(e)}),r("/goals?uid=".concat(t.uid,"#/goal"))}).then(function(){return M&&j(i.uploadImage,t)})};return n.createElement(n.Fragment,null,n.createElement(f,{classname:"start"},n.createElement("div",{className:"header"},n.createElement("div",{className:"back"},n.createElement(l,{to:"#/add/target"},n.createElement(w,null))),n.createElement("h5",null,"Goal ",n.createElement("br",null),"Details")),n.createElement("div",null,n.createElement("form",{className:"borderless",onSubmit:function(e){return e.preventDefault(),setTimeout(function(){return p({type:s.SET_SCHEDULE,payload:{status:!0,handleForm:function(){return H()}}})},500)},id:"goal"},g({name:"blob",defaultValue:M}),g({name:"saved",defaultValue:0}),g({name:"file",defaultValue:U}),g({name:"picture",defaultValue:D}),g({name:"target",defaultValue:t}),g({name:"amount",defaultValue:d}),g({name:"plan",defaultValue:E}),D&&n.createElement("div",{className:"file"},n.createElement("div",{id:"picture",style:{backgroundImage:M?"url(".concat(D,")"):"url(https://triva.s3.eu-west-2.amazonaws.com/profile/outline.png)"}}),N({onChange:function(e){z(e)}})),n.createElement(v,null,n.createElement("h4",null,"Goal"),n.createElement("div",null,b({name:"goal",placeholder:"Travel Ghana",required:!0,autoFocus:!0}))),n.createElement("div",{className:"file"},n.createElement("a",null,"Upload photo"),N({onChange:function(e){z(e)}})),n.createElement("p",null,"What does your goal look like, add a picture."),n.createElement(v,null,n.createElement("h4",null,"Share Goal"),n.createElement("div",{className:"list"},n.createElement("div",null,n.createElement("li",null,"You"),n.createElement("div",null)),B.map(function(e,t){return n.createElement("div",{key:t},n.createElement("li",null,e),n.createElement(G,{onClick:function(){return function(e){var t=u(B);-1!==e&&(t.splice(e,1),P(u(t)))}(t)}}))}),n.createElement("div",null,b({name:"newUser",placeholder:"Email"}),n.createElement(C,{onClick:function(){return e=document.querySelector("input[name=newUser]").value,P([].concat(u(B),[e])),void(document.querySelector("input[name=newUser]").value="");var e}})))),n.createElement(v,null,n.createElement(y,null,"start"))))))}),P=d(function(e){return{goals:e.goals}})(function(e){var a=e.goals,c=e.dispatch;E(e,["goals","dispatch"]);t(function(){j(i.getGoals).then(function(e){return c({type:s.SET_GOALS,payload:e})})},[]);return n.createElement(I,null,n.createElement("div",{className:"goals"},n.createElement("div",{className:"header"},a.length>0&&n.createElement("div",null,n.createElement("a",{onClick:function(){return r("#/summary")}},"Summary"),n.createElement("a",{className:"plus",onClick:function(){return r("#/add/target")}},n.createElement(C,null))),n.createElement("div",null,n.createElement("h2",null,"Goals"))),n.createElement("div",{className:"list"},function(e){if(e)return e.map(function(e,t){return n.createElement(l,{to:"/goals?uid=".concat(e.uid,"#/goal"),onClick:function(){return c({type:s.SET_GOAL,payload:e})},key:t,className:"item"},n.createElement("div",{className:"bg",style:{backgroundImage:"url(https://s3.eu-west-2.amazonaws.com/triva/goals/".concat(e.picture,")")}}),n.createElement("div",{className:"desc"},n.createElement("h5",null,e.goal),n.createElement("h6",null,"¢",e.saved," ",n.createElement("span",null,"saved"))))})}(a))))}),z=d(function(e){return{goal:e.goal,goalTransactions:e.goalTransactions}})(function(e){var a=e.goal,r=e.goalTransactions,c=e.dispatch,u=e.uid,o=x(),m=o.getDate,d=o.getWeekDay;t(function(){if("true"!==a.blob){var e=new FormData;e.append("uid",u),j(i.getGoal,e).then(function(e){return c({type:s.SET_GOAL,payload:e})}),j(i.getGoalTransactions,e).then(function(e){return c({type:s.SET_GOAL_TRANSACTIONS,payload:e})})}},[]);return n.createElement("div",{className:"goal"},n.createElement("div",{className:"bg",style:{backgroundImage:"true"==a.blob?"url(".concat(a.picture,")"):"url(https://s3.eu-west-2.amazonaws.com/triva/goals/".concat(a.picture,")")}},n.createElement("div",{className:"cover"},n.createElement("section",{className:"head"},n.createElement(l,{to:"/goals"},n.createElement(w,null)),n.createElement(l,{to:"?uid=".concat(u,"#/goal/edit")},n.createElement(T,null))))),n.createElement("div",{className:"details"},n.createElement("div",{className:"desc"},n.createElement("div",null,n.createElement("h3",null,a.goal||""),n.createElement("h6",null,"¢",a.target)),n.createElement(k,{percent:Number(a.saved/a.target*100).toFixed(1),amount:a.target})),n.createElement("div",{className:"amount"},n.createElement(l,{to:"?uid=".concat(u,"#/goal/fund")},n.createElement(C,null)),n.createElement("div",null,n.createElement("h2",null,"¢",L(a.saved)||""),n.createElement("span",null,"saved")),n.createElement(l,{to:"?uid=".concat(u,"#/goal/withdraw")},n.createElement(G,null))),n.createElement("div",{className:"list"},function(e){if(e)return e.map(function(e,t){return n.createElement("div",{className:"item",key:t},n.createElement("div",null,n.createElement("li",null,d(e.created)+" "+m(e.created)),n.createElement("span",null,"credit"===e.transaction_activity?"Added Cash":"Withdrawal"," ")),n.createElement("div",null,n.createElement("span",null,"credit"===e.transaction_activity?"+":"-","¢",e.amount)))})}(r))))}),H=d(function(e){return{balance:e.balance}})(function(e){var a=e.balance,u=e.uid,o=e.dispatch,m=O(a.balance,"debit"),d=c(m,2),E=d[0],p=d[1];t(function(){var e=new FormData;e.append("uid",u),j(i.getGoal,e).then(function(e){return o({type:s.SET_GOAL,payload:e})}).then(function(){return j(i.getBalance).then(function(e){return o({type:s.SET_BALANCE,payload:e})})})},[]);return n.createElement(f,null,n.createElement("div",{className:"header"},n.createElement(l,{to:"?uid=".concat(u,"#/goal"),className:"exit"},"Cancel"),n.createElement("h6",null,"¢",E+" "," ",n.createElement("span",null,"Bal"))),n.createElement("div",null,n.createElement("form",{onSubmit:function(e){e.preventDefault();var t=document.querySelector("form"),n=new FormData(t);return t.reset(),j(i.addFunds,n).then(function(){o({type:s.WITHDRAW_BALANCE,payload:n.get("amount")}),o({type:s.FUND_GOAL,payload:n.get("amount")}),r("?uid=".concat(u,"#/goal"))})}},g({name:"uid",defaultValue:u}),n.createElement(v,{id:"amount"},h({name:"amount",onChange:function(e){return p(e.target.value)},defaultValue:"0.00"}),"GHS"),n.createElement(v,null,n.createElement(S,null,"Add Funds")))))}),Y=d(function(e){return{goal:e.goal}})(function(e){var u=e.goal,o=e.uid,m=e.dispatch,d=O(u.saved,!1),E=c(d,2),p=E[0],y=E[1],N=a(!0),b=c(N,2),w=b[0],D=b[1];t(function(){var e=new FormData;e.append("uid",o),j(i.getGoal,e).then(function(e){return m({type:s.SET_GOAL,payload:e})}).then(function(){return j(i.getBalance).then(function(e){return m({type:s.SET_BALANCE,payload:e})})})},[]),t(function(){D(u.taget-u.saved==0)},[u]);return n.createElement(f,null,n.createElement("div",{className:"header"},n.createElement(l,{to:"?uid=".concat(o,"#/goal"),className:"exit"},"Cancel"),n.createElement("h6",null,w?n.createElement(n.Fragment,null,"¢",p+" "," ",n.createElement("span",null,"Saved")):null)),n.createElement("div",null,w?n.createElement("form",{onSubmit:function(e){if(e.preventDefault(),!(Number(u.saved)<Number(e.target.amount.value))){var t=document.querySelector("form"),n=new FormData(t);return t.reset(),j(i.withdrawFunds,n).then(function(){m({type:s.WITHDRAW_GOAL,payload:n.get("amount")}),r("?uid=".concat(o,"#/goal"))})}W("Amount exceeds saved amount")}},g({name:"uid",defaultValue:o}),n.createElement(v,{id:"amount"},h({name:"amount",onChange:function(e){return y(e.target.value)},defaultValue:"0.00"}),"GHS"),n.createElement(v,null,n.createElement(S,null,"Withdraw"))):n.createElement("div",null,n.createElement("h5",null,"Your goal is yet to be achieved, withdrawing now with come with a",n.createElement("b",null," 3%")," charge."),n.createElement("button",{onClick:function(){return D(!w)}},"Proceed"))))}),J=d(function(e){return{goal:e.goal,goalUsers:e.goalUsers}})(function(e){var d=e.goal,E=e.goalUsers,p=e.dispatch,y=e.uid,w=a(d.picture),D=c(w,2),A=D[0],T=D[1],k=a(""),_=c(k,2),L=_[0],V=_[1],U=a(d.picture),x=c(U,2),O=x[0],W=x[1],M=a(!1),I=c(M,2),R=I[0],q=I[1],B=a([]),P=c(B,2),z=P[0],H=P[1];t(function(){var e=new FormData;e.append("uid",y),j(i.getGoal,e).then(function(e){return p({type:s.SET_GOAL,payload:e})}).then(function(){return j(i.getSharedUsers,e).then(function(e){return p({type:s.SET_GOAL_USERS,payload:e})})})},[]),t(function(){H(E)},[E]);return n.createElement(n.Fragment,null,n.createElement(f,{classname:"goal start"},n.createElement("div",{className:"header"},n.createElement("span",null),n.createElement(l,{to:"?uid=".concat(y,"#/goal"),className:"exit"},"Cancel")),n.createElement("div",{className:"file"},n.createElement("div",{id:"picture",style:{backgroundImage:R?"url(".concat(A,")"):"url(https://s3.eu-west-2.amazonaws.com/triva/goals/".concat(d.picture,")")}},n.createElement("div",{className:"cover"},n.createElement(N,{onChange:function(e){!function(e){e.target.files[0]&&(q(!0),T(URL.createObjectURL(e.target.files[0])),o(e).then(function(e){V(e),W(e.name)}))}(e)}}),n.createElement(F,null)))),n.createElement("section",{className:"form"},n.createElement("form",{className:"borderless",onSubmit:function(e){e.preventDefault();var t=new FormData(document.querySelector("form"));t.append("shared",z.length>0),t.append("users",JSON.stringify({user:z}));var n=new FormData;return n.append("category","goals"),n.append("file",L),j(i.updateGoal,t).then(function(e){p({type:s.SET_GOAL,payload:m(t)}),r("?uid=".concat(y,"#/goal"))}).then(function(){return R&&j(i.uploadImage,n)})}},g({name:"uid",defaultValue:d.uid}),g({name:"blob",defaultValue:R}),g({name:"saved",defaultValue:d.saved}),g({name:"file",defaultValue:O}),g({name:"picture",defaultValue:A}),n.createElement(v,null,n.createElement("h4",null,"What's your Goal"),b({name:"goal",defaultValue:d.goal})),n.createElement(v,null,n.createElement("h4",null,"Target"),h({name:"target",defaultValue:d.target})),n.createElement(v,null,n.createElement("h4",null,"Share Goal"),n.createElement("div",{className:"list"},n.createElement("div",null,n.createElement("li",null,"You"),n.createElement("div",null)),z.map(function(e,t){return n.createElement("div",{key:t},n.createElement("li",null,e.username),n.createElement(G,{onClick:function(){return function(e){var t=u(z);-1!==e&&(t.splice(e,1),H(u(t)))}(t)}}))}),n.createElement("div",null,n.createElement(b,{autoFocus:!0,name:"newUser",placeholder:"Email"}),n.createElement(C,{onClick:function(){return e=document.querySelector("input[name=newUser]").value,H([].concat(u(z),[e])),void(document.querySelector("input[name=newUser]").value="");var e}})))),n.createElement(v,null,n.createElement(S,null,"Update Goal")),n.createElement(v,null,n.createElement(l,{to:"?uid=".concat(y,"#/goal/edit/delete"),className:"del"},"Delete"))))))}),K=d(function(e){return{goal:e.goal}})(function(e){var a=e.goal,c=e.dispatch,u=e.uid;return t(function(){var e=new FormData;e.append("uid",u),j(i.getGoal,e).then(function(e){return c({type:s.SET_GOAL,payload:e})})},[]),n.createElement(f,null,n.createElement("div",{className:"header"},n.createElement(l,{to:"?uid=".concat(u,"#/goal/edit"),className:"exit"},"Cancel"),n.createElement("h5",null)),n.createElement("div",null,n.createElement("h5",null,"Delete ",a.goal,","),n.createElement("p",{style:{fontSize:"20px",fontWeight:"300"}},"All funds accumulated will be moved to your triva account balance, with a charge of 3% of goal non completion.")),n.createElement("div",null,n.createElement("button",{onClick:function(){return(e=new FormData).append("uid",u),j(i.deleteGoal,e).then(function(){return r("/goals")});var e}},"Delete Goal")))});e("default",function(e){return n.createElement(n.Fragment,null,n.createElement(M,{location:e.location},n.createElement(R,{path:"#/summary",up:!0}),n.createElement(q,{path:"#/add/target",left:!0}),n.createElement(B,{path:"#/add/target/details",left:!0}),n.createElement(z,{path:"#/goal",left:!0}),n.createElement(H,{path:"#/goal/fund",up:!0}),n.createElement(Y,{path:"#/goal/withdraw",up:!0}),n.createElement(J,{path:"#/goal/edit",up:!0}),n.createElement(K,{path:"#/goal/edit/delete",up:!0})),n.createElement(P,null))})}}});
