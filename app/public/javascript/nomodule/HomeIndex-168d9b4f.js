System.register(["./index-b0513f57.js","./index-272f0464.js","./defineProperty-a1089ec5.js","./slicedToArray-4acdf83a.js","./toConsumableArray-62f8d598.js","./common-d400c37d.js","./api-79424633.js","./actionTypes-b0d14a88.js","./index-fbae8ffb.js","./extends-0c7a6a58.js","./objectWithoutProperties-6039c2e9.js","./Pager-f37bd16c.js","./Dialog-24c60389.js","./index-e4d520eb.js","./Icons-c6c555dc.js","./Animate-411c42ad.js","./index-21526502.js","./PagerRouter-33985d49.js","./Menu-52ea7ecf.js","./TabRouter-753fa24e.js","./Link-d68e5b48.js","./DataSets-87160df1.js"],function(e){"use strict";var t,n,a,r,l,c,u,o,m,i,d,s,E,p,f,h,y,v,b,g,N,T,A,C,M,_,S,k,D,w,B,j,x,q,L,V,I,P,O,F,H,R,Y;return{setters:[function(e){t=e.a,n=e.R,a=e.b,r=e.k},function(e){l=e.n,c=e.L},function(){},function(e){u=e._},function(e){o=e._},function(e){m=e.checkBalance,i=e.getFormData},function(e){d=e.a},function(e){s=e.t},function(e){E=e.u},function(){},function(e){p=e._},function(e){f=e.P},function(e){h=e.D},function(e){y=e.H,v=e.L,b=e.T,g=e.A,N=e.N,T=e.E},function(e){A=e.P,C=e.M,M=e.A,_=e.b},function(e){S=e.A},function(e){k=e.a,D=e.b,w=e.c,B=e.d,j=e.e,x=e.f,q=e.A},function(e){L=e.default},function(e){V=e.M},function(e){I=e.T,P=e.a,O=e.b,F=e.c},function(e){H=e.A},function(e){R=e.b,Y=e.m}],execute:function(){var W=E(function(e){return{balance:e.balance,activities:e.activities}})(function(e){var a=e.balance,r=(e.activities,e.dispatch);p(e,["balance","activities","dispatch"]);return t(function(){k(d.getBalance).then(function(e){return r({type:s.SET_BALANCE,payload:e})}),k(d.getActivities).then(function(e){return r({type:s.SET_ACTIVTIES,payload:e})})},[]),n.createElement("div",{className:"home"},n.createElement("div",{className:"status"},n.createElement("div",null,n.createElement("a",{onClick:function(){return l("/home?tab=home#/addcash")},className:"topup"},n.createElement(A,null)),n.createElement("div",{className:"balance"},n.createElement("h2",null,"¢",D(a.balance))),n.createElement("a",{onClick:function(){return l("/home?tab=home#/withdraw")},className:"topup"},n.createElement(C,null)))),n.createElement("div",null))}),U=E(function(e){return{activities:e.activities}})(function(e){var l=e.activities,c=e.dispatch,m=a([]),i=u(m,2),E=i[0],p=i[1],h=a([]),y=u(h,2),v=y[0],b=y[1],g=a((new Date).getMonth()),N=u(g,2),T=N[0],A=N[1],C=a(),M=u(C,2),_=M[0],x=M[1],q=a(0),L=u(q,2),V=L[0],I=L[1],P=a(0),O=u(P,2),F=O[0],H=O[1],R=[],Y=w(".balance"),W=u(Y,1)[0],U=j(),G=U.getTime,Z=U.getDate,$=U.getWeekDay,z=U.getMonth,K=U.getFullYear,J=B(function(){setTimeout(function(){b(function(e){return[].concat(o(e),o(E.slice(e.length,e.length+9)))}),ee(!1)},500)}),Q=u(J,2),X=Q[0],ee=Q[1];t(function(){k(d.getBalance).then(function(e){return c({type:s.SET_BALANCE,payload:e})}),k(d.getActivities).then(function(e){return c({type:s.SET_ACTIVTIES,payload:e})})},[]),t(function(){var e=[],t=0,n=0;if(I(0),H(0),l.length>0)for(var a=0;a<l.length;a++)l[a].created&&new Date(l[a].created).getMonth()==T&&(e.push(l[a]),"debit"===l[a].transaction_activity?t+=Number(l[a].amount):n+=Number(l[a].amount));I(t),H(n),b(e.slice(0,10)),p(e)},[l,T]),t(function(){A((new Date).getMonth()+W.count)},[W]),t(function(){var e=new Date;e.setMonth(T),x(z(e)+" "+K(e))},[T]);return n.createElement(f,{classname:"activity"},n.createElement("div",{className:"month"},_),n.createElement("div",{className:"balance"},n.createElement("div",null,n.createElement("h2",null,"¢",D(V)),n.createElement("span",null,"Total Spending")),n.createElement("div",null,n.createElement("h2",null,"¢",D(F)),n.createElement("span",null,"Top ups"))),n.createElement("div",{className:"list width-100"},function(e){if(e)return e.map(function(e,t){var a;!R.includes(new Date(e.created).getDate())&&R.push(new Date(e.created).getDate())&&(a=!0);var l=a&&$(e.created)+" "+Z(e.created);return n.createElement(r,{key:t},a&&n.createElement("span",{className:"date"},n.createElement("span",null,l)),n.createElement(S,null,n.createElement("div",{className:"item"},n.createElement("div",null,n.createElement("li",null,e.name),n.createElement("li",null,e.desc),n.createElement("span",null,G(e.created))),n.createElement("span",null,"debit"==e.transaction_activity?"-":"","¢",e.amount))))})}(v),E.length===v.length?null:X&&n.createElement("h5",{className:"load"},"loading ...")))}),G=E(function(e){return{paymentMethods:e.paymentMethods}})(function(e){var r=e.paymentMethods,c=e.dispatch,o=a([]),m=u(o,2),i=m[0],E=m[1],p=a("card"),f=u(p,2),y=f[0],v=f[1],b=a(!1),g=u(b,2),N=g[0],T=g[1],C=a(!1),D=u(C,2),w=D[0],B=D[1];t(function(){k(d.getPaymentMethods).then(function(e){return c({type:s.SET_PAYMENT_METHODS,payload:e})})},[]),t(function(){for(var e=[],t=0;t<r.length;t++)r[t].method===y&&e.push(r[t]);E(e)},[y,r]);var j=function(e){v(e),B(!1)},x=function(e){T(!1),l("/home?tab=payments#/"+e)};return n.createElement(n.Fragment,null,n.createElement("div",{className:"paymentMethods"},n.createElement("div",{className:"mid-header width-90"},n.createElement("h5",{onClick:function(){return B(!0)}},y,n.createElement(M,null)),n.createElement("a",{className:"plus",onClick:function(){return T(!0)}},n.createElement(A,null))),n.createElement("div",{className:"list width-100"},function(e){if(e)return e.map(function(e,t){return"card"===e.method?n.createElement(_,{key:t,num:e.desc}):n.createElement("a",{key:t},n.createElement("div",{className:"item"},n.createElement("div",null,n.createElement("li",null,e.desc),n.createElement("span",null,e.processor_type))))})}(i))),N&&n.createElement(h,{onClick:T},n.createElement(S,{onClick:function(){return x("addmomo")}},n.createElement("li",null,"Mobile Money")),n.createElement(S,{onClick:function(){return x("addcard")}},n.createElement("li",null,"Card")),n.createElement(S,{onClick:function(){return x("addbank")}},n.createElement("li",null,"Bank"))),w&&n.createElement(h,{onClick:B},n.createElement(S,{onClick:function(){return j("momo")}},n.createElement("li",null,"Mobile Money")),n.createElement(S,{onClick:function(){return j("card")}},n.createElement("li",null,"Card")),n.createElement(S,{onClick:function(){return j("bank")}},n.createElement("li",null,"Bank"))))}),Z=E(function(e){return{balance:e.balance,paymentMethods:e.paymentMethods}})(function(e){var r=e.balance,o=e.paymentMethods,m=e.dispatch,i=a(""),E=u(i,2),p=E[0],N=E[1],T=a(!1),A=u(T,2),C=A[0],M=A[1],_=a(!1),D=u(_,2),w=D[0],B=D[1],j=a([]),L=u(j,2),V=L[0],I=L[1],P=x(r.balance),O=u(P,2),F=O[0],R=O[1],Y=function(e){N(e),M(!1),B(!0)},W=function(e){B(!1),m({type:s.SET_VODA_TOKEN,payload:{status:!0,proceed:function(){return G(e)}}})},U=function(e){B(!1),m({type:s.SET_CARD_CVV,payload:{status:!0,proceed:function(){return G(e)}}})},G=function(e){m({type:s.SET_BUTTON,payload:!0});var t=document.querySelector("#addcash"),n=new FormData(t);n.append("payment_uid",e.uid);var a=document.querySelector("input[name=vdf_token]"),r=document.querySelector("input[name=cvv]");return a?n.append("vdf_token",a.value):r?n.append("cvv",r.value):B(!1),k(d.addCash,n).then(function(t){if(t)return m({type:s.SET_TRANSACTION,payload:{status:!0,amount:n.get("amount"),note:"Transfer Complete",processor:e.processor_type,desc:e.desc,redirect:"/home"}}),m({type:s.ADD_BALANCE,payload:n.get("amount")}),l("/home")})};return t(function(){setTimeout(function(){document.getElementsByTagName("input")[0].focus()},1e3),k(d.getBalance).then(function(e){return m({type:s.SET_BALANCE,payload:e})}).then(function(){return k(d.getPaymentMethods).then(function(e){return m({type:s.SET_PAYMENT_METHODS,payload:e})})})},[]),t(function(){for(var e=[],t=0;t<o.length;t++){var n=o[t].method;p===n?e.push(o[t]):p===n&&e.push(o[t])}I(e)},[p,o]),n.createElement(n.Fragment,null,n.createElement(f,{classname:"overlays"},n.createElement("div",{className:"header"},n.createElement(c,{to:"/home",className:"exit"},"Cancel"),n.createElement("h6",null,"¢",F+" "," ",n.createElement("span",null,"Bal"))),n.createElement("div",null,n.createElement("form",{id:"addcash",onSubmit:function(e){return e.preventDefault(),Number(document.querySelector("input[name=amount]").value)?M(!0):q("Enter amount!")}},y({name:"method",defaultValue:p}),n.createElement(v,{id:"amount"},b({name:"amount",onChange:function(e){return R(e.target.value)},defaultValue:"0.00",required:!0}),"GHS"),n.createElement(v,null,n.createElement(g,{default:!0},"AddCash"))))),C?n.createElement(h,{onClick:M},n.createElement(S,{onClick:function(){return Y("momo")}},n.createElement("li",null,"Mobile Money")),n.createElement(S,{onClick:function(){return Y("card")}},n.createElement("li",null,"Card"))):"",w?n.createElement(h,{onClick:B},n.createElement(H,{to:"/home?tab=home#/add".concat(p)},n.createElement("li",{className:"new"},"New ",p)),function(e){return e.map(function(e,t){return n.createElement(S,{key:e.uid,onClick:function(){return function(e){var t=e.processor_type;"VDF"===t?W(e):"MAS"===t||"VIS"===t?U(e):G(e)}(e)}},n.createElement("li",null,e.desc),n.createElement("span",null,e.method))})}(V)):"")}),$=E(function(e){return{balance:e.balance,paymentMethods:e.paymentMethods}})(function(e){var r=e.balance,o=e.paymentMethods,i=e.dispatch,E=a(""),p=u(E,2),N=p[0],T=p[1],A=a(!1),C=u(A,2),M=C[0],_=C[1],D=a(!1),w=u(D,2),B=w[0],j=w[1],L=a([]),V=u(L,2),I=V[0],P=V[1],O=x(r.balance,"debit"),F=u(O,2),R=F[0],Y=F[1],W=function(e){T(e),_(!1),j(!0)},U=function(e){var t=document.querySelector("form"),n=new FormData(t);return n.append("payment_uid",e.uid),n.append("processor",e.processor_type),n.append("desc",e.desc),j(!1),i({type:s.SET_AUTHORIZE,payload:{status:!0,proceed:function(){return G(n)}}})},G=function(e){return e.append("password",document.querySelector("input[name=password]").value),i({type:s.SET_AUTHORIZE,payload:{status:!1}}),i({type:s.SET_BUTTON,payload:!0}),k(d.withdraw,e).then(function(t){if(i({type:s.WITHDRAW_BALANCE,payload:e.get("amount")}),"bank"===e.get("method")&&t){if(t.resp.reference_id)return i({type:s.SET_REFERENCE_AND_TRANSACTION,payload:{reference:t,transaction:{redirect:"/home"}}}),l("/authorize/bank/".concat(t.resp.reference_id))}else if(t&&"completed"===t.status)return i({type:s.SET_TRANSACTION,payload:{status:!0,amount:e.get("amount"),contact:e.get("contact"),note:"Transfer Complete",redirect:"/home"}}),l("/home")})};return t(function(){k(d.getBalance).then(function(e){return i({type:s.SET_BALANCE,payload:e})}).then(function(){return k(d.getPaymentMethods).then(function(e){return i({type:s.SET_PAYMENT_METHODS,payload:e})})})},[]),t(function(){for(var e=[],t=0;t<o.length;t++){var n=o[t].method;N===n?e.push(o[t]):N===n&&e.push(o[t])}P(e)},[N,o]),n.createElement(n.Fragment,null,n.createElement(f,{classname:"overlays"},n.createElement("div",{className:"header"},n.createElement(c,{to:"/home",className:"exit"},"Cancel"),n.createElement("h6",null,"¢",R+" "," ",n.createElement("span",null,"Bal"))),n.createElement("div",null,n.createElement("form",{id:"form",onSubmit:function(e){e.preventDefault();var t=!Number(document.querySelector("input[name=amount]").value);return t?q("Enter amount!"):m(t,r.balance)?_(!0):q("Insufficient Balance")}},y({name:"method",defaultValue:N}),n.createElement(v,{id:"amount"},b({name:"amount",onChange:function(e){return Y(e.target.value)},defaultValue:"0.00",required:!0}),"GHS"),n.createElement(v,null,n.createElement(g,{default:!0},"Withdraw"))))),M?n.createElement(h,{onClick:_},n.createElement(S,{onClick:function(){return W("momo")}},n.createElement("li",null,"Mobile Money")),n.createElement(S,{onClick:function(){return W("bank")}},n.createElement("li",null,"Bank"))):"",B?n.createElement(h,{onClick:j},n.createElement(H,{to:"/home?tab=home#/add".concat(N)},n.createElement("li",{className:"new"},"New ",N)),function(e){return e.map(function(e,t){return n.createElement(S,{key:e.uid,onClick:function(){return U(e)}},n.createElement("li",null,e.desc),n.createElement("span",null,e.method))})}(I)):"")}),z=E()(function(e){var t=e.dispatch,r=(p(e,["dispatch"]),a("Access Bank LTD")),o=u(r,2),m=o[0],E=o[1],h=a(""),b=u(h,2),T=b[0],A=b[1];return n.createElement(f,{classname:"paymentMethods"},n.createElement("div",{className:"header"},n.createElement(c,{to:"/home?tab=payments",className:"exit"},"Cancel"),n.createElement("h5",null,"Add Bank")),n.createElement("div",null,n.createElement("form",{onSubmit:function(e){e.preventDefault();var n=document.querySelector("form"),a=new FormData(n);return t({type:s.ADD_PAYMENT_METHODS,payload:i(a)}),l("/home?tab=payments"),k(d.addBank,a)}},n.createElement(v,null,"Banks",n.createElement("select",{name:"processor_type",id:"processor_type",onChange:function(e){E(e.target[e.target.selectedIndex].text)}},R.map(function(e,t){var a=e.code,r=e.name;return n.createElement("option",{key:t,value:a},r)}))),y({name:"name",defaultValue:m}),y({name:"desc",defaultValue:T}),n.createElement(v,null,"Bank Account Number",N({pattern:"[0-9].{8,}",minLength:"8",title:"Enter Account Number",name:"number",onChange:function(e){return(t=e.target.value).length>=5?A(t.substr(0,5)):"";var t},required:!0})),n.createElement(v,null,n.createElement(g,null,"Add Bank")))))}),K=E()(function(e){var t=e.dispatch,r=(p(e,["dispatch"]),a("")),o=u(r,2),m=o[0],E=o[1],h=a(""),A=u(h,2),C=A[0],M=A[1],_=a(""),S=u(_,2),D=S[0],w=S[1];return n.createElement(f,{classname:"paymentMethods"},n.createElement("div",{className:"header"},n.createElement(c,{to:"/home?tab=payments",className:"exit"},"Cancel"),n.createElement("h5",null,"Add card")),n.createElement("div",null,n.createElement("form",{onSubmit:function(e){e.preventDefault();var n=document.querySelector("form"),a=new FormData(n);return t({type:s.ADD_PAYMENT_METHODS,payload:i(a)}),l("/home?tab=payments"),k(d.addCard,a)}},n.createElement(v,null,"Card number",N({name:"pan",pattern:"[0-9]{16}",title:"Enter correct card number",minLength:"16",maxLength:"16",onChange:function(e){return t=e.target.value,n=function(e){var t={Visa:/^4[0-9]{12}(?:[0-9]{3})?$/,Mastercard:/^5[1-5][0-9]{14}$/};for(var n in t)if(t[n].test(e))return n}(t),E("Visa"===n?"VIS":"MAS"),M(n),16==t.length?w(t.substr(12,16)):"";var t,n},required:!0})),y({name:"processor_type",defaultValue:m}),y({name:"name",defaultValue:C}),y({name:"desc",defaultValue:D}),n.createElement("div",{className:"cardDetails"},n.createElement(v,null,"MM",N({name:"date_mm",minLength:"2",maxLength:"2",placeholder:"00",pattern:"[0-9]{2}",title:"Enter correct month",required:!0})),n.createElement(v,null,"YY",N({name:"date_yy",minLength:"2",maxLength:"2",placeholder:"00",pattern:"[0-9]{2}",title:"Enter correct year",required:!0}))),n.createElement(v,null,"Cardholder name",b({name:"card_holder",required:!0})),n.createElement(v,null,"Email",T({name:"email",required:!0})),n.createElement(v,null,"Address line",b({name:"address",required:!0})),n.createElement(v,null,"City",b({name:"city",required:!0})),n.createElement(v,null,n.createElement(g,null,"Add Card")))))}),J=E()(function(e){var t=e.dispatch,r=(p(e,["dispatch"]),a("Access Bank LTD")),o=u(r,2),m=o[0],E=o[1],h=a(""),b=u(h,2),T=b[0],A=b[1];return n.createElement(f,{classname:"paymentMethods"},n.createElement("div",{className:"header"},n.createElement(c,{to:"/home?tab=payments",className:"exit"},"Cancel"),n.createElement("h5",null,"Add Momo")),n.createElement("div",null,n.createElement("form",{onSubmit:function(e){e.preventDefault();var n=document.querySelector("form"),a=new FormData(n);return t({type:s.ADD_PAYMENT_METHODS,payload:i(a)}),l("/home?tab=payments"),k(d.addMoMo,a)}},n.createElement(v,null,"Select Mobile Money",n.createElement("select",{name:"processor_type",onChange:function(e){E(e.target[e.target.selectedIndex].text)}},Y.map(function(e,t){var a=e.code,r=e.name;return n.createElement("option",{key:t,value:a},r)}))),y({name:"name",defaultValue:m}),y({name:"desc",defaultValue:T}),n.createElement(v,null,"Mobile Money Number",N({pattern:"[0-9]{10}",minLength:"10",maxLength:"10",title:"Enter tel number",name:"number",onChange:function(e){return(t=e.target.value).length>=10?A(t.substr(5,10)):"";var t},required:!0})),n.createElement(v,null,n.createElement(g,null,"Add MoMo")))))});e("default",function(e){return n.createElement(n.Fragment,null,n.createElement(L,{location:e.location},n.createElement(Z,{path:"#/addcash",up:!0}),n.createElement($,{path:"#/withdraw",up:!0}),n.createElement(z,{path:"#/addbank",up:!0}),n.createElement(K,{path:"#/addcard",up:!0}),n.createElement(J,{path:"#/addmomo",up:!0})),n.createElement(V,null,n.createElement(I,null,n.createElement("section",{className:"header"},n.createElement(P,{location:e.location},n.createElement(O,{path:"/home?tab=home",index:!0},n.createElement("h2",null,"Today")),n.createElement(O,{path:"/home?tab=activity"},n.createElement("h2",null,"Activity")),n.createElement(O,{path:"/home?tab=payments"},n.createElement("h2",null,"Link Payment")))),n.createElement(F,{location:e.location},n.createElement(W,{path:"home",index:!0}),n.createElement(U,{path:"activity"}),n.createElement(G,{path:"payments"})))))})}}});
