System.register(["./index-b0513f57.js","./index-272f0464.js","./defineProperty-a1089ec5.js","./slicedToArray-4acdf83a.js","./toConsumableArray-62f8d598.js","./common-d400c37d.js","./api-79424633.js","./actionTypes-b0d14a88.js","./index-fbae8ffb.js","./extends-0c7a6a58.js","./objectWithoutProperties-6039c2e9.js","./Pager-f37bd16c.js","./Dialog-24c60389.js","./index-e4d520eb.js","./Icons-c6c555dc.js","./Animate-411c42ad.js","./index-21526502.js"],function(e){"use strict";var n,t,a,c,o,u,r,l,i,s,p,m,f,d,y,E,b,A,h,T,S,_,N,j;return{setters:[function(e){n=e.b,t=e.a,a=e.R},function(e){c=e.L,o=e.n},function(){},function(e){u=e._},function(){},function(e){r=e.checkBalance},function(e){l=e.a},function(e){i=e.t},function(e){s=e.u},function(){},function(e){p=e._},function(e){m=e.P},function(e){f=e.D},function(e){d=e.H,y=e.L,E=e.N,b=e.T,A=e.A},function(e){h=e.E},function(e){T=e.A},function(e){S=e.f,_=e.a,N=e.A,j=e.h}],execute:function(){e("default",s(function(e){return{balance:e.balance,session:e.session,payeeAccounts:e.payeeAccounts}})(function(e){var s=e.dispatch,v=p(e,["dispatch"]),C=n(""),g=u(C,2),k=g[0],q=g[1],x=n(!1),R=u(x,2),B=R[0],w=R[1],D=n(!1),I=u(D,2),O=I[0],P=I[1],H=n([]),F=u(H,2),M=F[0],U=F[1],V=S(v.balance.balance,"request"===v.option?"credit":"debit"),L=u(V,2),z=L[0],G=L[1],Z=function(e){q(e),w(!1),P(!0)},W=function(e){var n=new FormData(document.querySelector("form")),t=n.get("amount");return n.append("contact",e.account),n.append("processorType",e.account_processor),n.append("method",e.account_type),Number(t)?s({type:i.SET_AUTHORIZE_AND_TRANSACTION,payload:{transaction:{proceed:function(){return Y(n)}},authorize:{status:!0,proceed:function(){return Y(n)}}}}):N("Enter amount!")},Y=function(e){return document.querySelector("input[name=password]")&&e.append("password",document.querySelector("input[name=password]").value),P(!1),s({type:i.SET_AUTHORIZE,payload:{status:!1}}),s({type:i.SET_BUTTON,payload:!0}),_(l.sendMoney,e).then(function(n){if("bank"===e.get("method")&&n){if(n.resp.reference_id)return s({type:i.SET_REFERENCE_AND_TRANSACTION,payload:{reference:n,transaction:{redirect:"/pay"}}}),o("/authorize/bank/".concat(n.resp.reference_id))}else if(n&&"completed"===n.status)return s({type:i.SET_TRANSACTION,payload:{status:!0,amount:e.get("amount"),contact:e.get("contact"),note:"Transfer Complete",redirect:"/pay"}})})};return t(function(){var e=new FormData;e.append("payee_uid",v.uid),_(l.getBalance).then(function(e){return s({type:i.SET_BALANCE,payload:e})}).then(function(){return _(l.getPayeeAccounts,e).then(function(e){return s({type:i.SET_PAYEE_ACCOUNTS,payload:e})})})},[]),t(function(){for(var e=[],n=v.payeeAccounts,t=0;t<n.length;t++){var a=n[t].account_type;k===a?e.push(n[t]):k===a&&e.push(n[t])}U(e)},[k,v.payeeAccounts]),a.createElement(a.Fragment,null,a.createElement(m,null,a.createElement("div",{className:"header",style:{paddingBottom:"0px"}},a.createElement(c,{to:"/pay"},a.createElement(h,null)),a.createElement("h6",null,"Â¢",z+" "," ",a.createElement("span",null,"Bal"))),a.createElement("div",null,a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},d({name:"payee",defaultValue:v.payee}),d({name:"method",defaultValue:k}),a.createElement(y,{id:"amount"},E({name:"amount",onChange:function(e){return G(e.target.value)},defaultValue:"0.00"}),"GHS"),a.createElement(y,null,b({name:"note",placeholder:"Message for ".concat(v.payee),style:{margin:"0px"},defaultValue:""})),a.createElement("h5",null),a.createElement(y,null,"request"===v.option?a.createElement("a",{onClick:function(){return function(){var e=document.querySelector("input[name=amount]").value;if(!Number(e))return N("Enter amount!");var n="GHS".concat(e," - ").concat(document.querySelector("input[name=note]").value),t="https://hitriva.me/".concat(v.session.username);j("Request Payment",n,t,function(){return o("/pay")})}()}},a.createElement(A,null,v.option)):a.createElement("a",{onClick:function(){return e=document.querySelector("input[name=amount]").value,Number(e)?r(e,v.balance.balance)?w(!0):N("Insufficient Balance"):N("Enter amount!");var e}},a.createElement(A,{default:!0},v.option)))))),B?a.createElement(f,{onClick:w},a.createElement(T,{onClick:function(){return Z("momo")}},a.createElement("li",null,"Mobile Money")),a.createElement(T,{onClick:function(){return Z("bank")}},a.createElement("li",null,"Bank"))):"",O?a.createElement(f,{onClick:P},a.createElement(T,{onClick:function(){o("/pay?tab=pay&payee=".concat(v.payee,"&uid=").concat(v.uid,"&option=").concat(k,"#/payee/add")),P(!1)}},a.createElement("li",{className:"new"},"New ",k)),function(e){return e.map(function(e,n){return a.createElement(T,{key:e.uid,onClick:function(){return W(e)}},a.createElement("li",null,e.account),a.createElement("span",null,e.account_processor))})}(M)):"")}))}}});
